services:
  downloader:
    build: .
    container_name: smart_grid_geo_downloader
    
    env_file:
      - .env
    
    volumes:
      - ./src:/app/src
      - ./data:/app/data
    
    working_dir: /app/src
    
    # Download geo-based data: 200 nodes sampled geographically, 3 months
    # Adjust --sample for more/fewer nodes (max ~4300)
    # Strategies: random, stratified, geographic
    command: >
      python download_geo.py 
        --sample 200 
        --strategy geographic 
        --months 18
        --delay 2.0
        --output-dir /app/data/downloads
    
    # Don't restart after download completes
    restart: "no"
